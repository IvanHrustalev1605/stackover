<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous">
    <title>Question Page</title>
</head>
<body>
<div class="container">
    <div id="content">
        <div class="inner-content clearfix">
            <!-- Question Header -->
            <div id="question-header"
                 class="d-flex sm:fd-column">
                <h1 class="fs-headline1 ow-break-word mb8 flex--item fl1">
                    <a href="/replace-me"
                       class="question-hyperlink">Spring-Security Как получить авторизованного пользователя</a>
                </h1>
                <div class="ml12 aside-cta flex--item print:d-none sm:ml0 sm:mb12 sm:order-first sm:as-end">
                    <a href="/replace-me"
                       class="ws-nowrap s-btn s-btn__primary">
                        Задать вопрос
                    </a>
                </div>
            </div>
            <!-- End Question Header -->

            <div class="d-flex fw-wrap pb8 mb16 bb bc-black-075">
                <div class="flex--item ws-nowrap mr16 mb8"
                     title="2016-04-29 12:55:05Z">
                    <span class="fc-light mr2">Вопрос задан</span>
                    <time datetime="2016-04-29T12:55:05">6 лет 9 месяцев назад
                    </time>
                </div>
                <div class="flex--item ws-nowrap mr16 mb8">
                    <span class="fc-light mr2">Изменён</span>
                    <a href="/replace-me"
                       class="s-link s-link__inherit"
                       title="2016-04-29 13:46:04Z">6 лет 9 месяцев назад </a>
                </div>
            </div>
            <div id="mainbar">
                <!-- Question -->
                <div class="question"
                     id="question">
                    <div class="post-layout">
                        <!-- Question actions (Voting, Bookmarks, History) -->
                        <div class="votecell post-layout--left">
                            <div class="d-flex jc-center fd-column ai-stretch gs4 fc-black-200">
                                <button class="flex--item s-btn s-btn__unset c-pointer">
                                    <svg class="svg-icon iconArrowUpLg"
                                         width="36"
                                         height="36"
                                         viewBox="0 0 36 36">
                                        <path d="M2 25h32L18 9 2 25Z"></path>
                                    </svg>
                                </button>
                                <div class="flex--item d-flex fd-column ai-center fc-black-500 fs-title">7</div>
                                <button class="flex--item s-btn s-btn__unset c-pointer">
                                    <svg class="svg-icon iconArrowDownLg"
                                         width="36"
                                         height="36"
                                         viewBox="0 0 36 36">
                                        <path d="M2 11h32L18 27 2 11Z"></path>
                                    </svg>
                                </button>
                                <button class="s-btn s-btn__unset c-pointer py4">
                                    <svg class="fc-theme-primary-500 d-none svg-icon iconBookmark"
                                         width="18"
                                         height="18"
                                         viewBox="0 0 18 18">
                                        <path d="M3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                    </svg>
                                    <svg class="svg-icon iconBookmarkAlt"
                                         width="18"
                                         height="18"
                                         viewBox="0 0 18 18">
                                        <path d="m9 10.6 4 2.66V3H5v10.26l4-2.66ZM3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                    </svg>
                                </button>
                                <a class="flex--item s-btn s-btn__unset c-pointer py6 mx-auto"
                                   href="/replace-me">
                                    <svg class="mln2 mr0 svg-icon iconHistory"
                                         width="19"
                                         height="18"
                                         viewBox="0 0 19 18">
                                        <path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                        <!-- End Question actions -->

                        <!-- Question content -->
                        <div class="postcell post-layout--right">
                            <div class="s-prose">
                                <p>Всем привет! Как можно получить авторизованного пользователя, т.е после
                                    авторизации извлечь обьект данного юзера из БД к примеру для того чтобы
                                    заполнить поля на его странице профиля, DAO у меня реализован с помощью
                                    hibernate и сама авторизация выполняется из БД. Заранее спасибо!</p>
                            </div>
                            <div class="mt24 mb12">
                                <div class="post-taglist d-flex gs4 gsy fd-column">
                                    <div class="d-flex ps-relative fw-wrap">
                                        <ul class="ml0 list-ls-none d-inline">
                                            <li class="d-inline mr4">
                                                <a href="/replace-me"
                                                   class="post-tag">
                                                    java
                                                </a>
                                            </li>
                                            <li class="d-inline mr4">
                                                <a href="/replace-me"
                                                   class="post-tag">
                                                    spring
                                                </a>
                                            </li>
                                            <li class="d-inline mr4">
                                                <a href="/replace-me"
                                                   class="post-tag">
                                                    hibernate
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="mb0 ">
                                <div class="mt16 d-flex gs8 gsy fw-wrap jc-end ai-start pt4 mb16">
                                    <div class="flex--item mr16 fl1 w96">
                                        <div class="pt2">
                                            <div class="d-flex gs8 s-anchors s-anchors__muted fw-wrap">
                                                <div class="flex--item">
                                                    <a href="/replace-me">Поделиться</a>
                                                </div>
                                                <div class="flex--item">
                                                    <a href="/replace-me">Улучшить вопрос</a>
                                                </div>
                                                <div class="flex--item">
                                                    <button type="button"
                                                            class="s-btn s-btn__link">
                                                        Отслеживать
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="post-signature owner flex--item">
                                        <div class="user-info">
                                            <div class="user-action-time">
                                                задан
                                                <span title="2016-04-29 12:55:05Z"
                                                      class="relativetime">
                                                        29 апр 2016 в 12:55
                                                    </span>
                                            </div>
                                            <div class="user-gravatar32">
                                                <a href="/replace-me">
                                                    <div class="gravatar-wrapper-32">
                                                        <img src="https://www.gravatar.com/avatar/530604ad8ed091e9f19c9066c752bf25?s=64&amp;d=identicon&amp;r=PG&amp;f=1"
                                                             alt="Andrey Sibirkin's user avatar"
                                                             width="32"
                                                             height="32"
                                                             class="bar-sm">
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="user-details">
                                                <a href="/replace-me">Andrey Sibirkin</a>
                                                <div class="-flair">
                                                    <span class="reputation-score"> 605 </span>
                                                    <span title="5 серебряных знаков">
                                                        <span class="badge2"></span>
                                                        <span class="badgecount">5</span>
                                                    </span>
                                                    <span class="v-visible-sr">5 серебряных знаков</span>
                                                    <span title="17 бронзовых знаков">
                                                        <span class="badge3"></span>
                                                        <span class="badgecount">17</span>
                                                    </span>
                                                    <span class="v-visible-sr">17 бронзовых знаков</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Question Content -->

                        <!-- Question Comments -->
                        <div class="post-layout--right">
                            <div class="comments bt bc-black-075 mt12">
                                <ul class="comments-list">
                                    <li class="comment">
                                        <div class="comment-actions">
                                            <div class="comment-score">
                                                <span title="количество голосов «полезный комментарий»"
                                                      class="cool">1</span>
                                            </div>
                                        </div>
                                        <div class="comment-text">
                                            <div class="comment-body">
                                                <span class="comment-copy">
                                                    про дробные прогнал, но :
                                                    <a href="http://www.wolframalpha.com/input/?i=17+mod+%287%29"
                                                       rel="nofollow noreferrer">wolframalpha.com/input/?i=17+mod+%287%29</a>
                                                    <a href="http://www.wolframalpha.com/input/?i=-17+mod+%287%29"
                                                       rel="nofollow noreferrer">wolframalpha.com/input/?i=-17+mod+%287%29</a>
                                                </span>
                                                <div class="d-inline-flex ai-center">
                                                    –&nbsp;
                                                    <a href="/replace-me"
                                                       title="18,050 баллов репутации"
                                                       class="comment-user">zb'</a>
                                                </div>
                                                <span class="comment-date">
                                                    <span title="2013-06-17 12:33:35Z"
                                                          class="relativetime-clean">17 июн 2013 в 12:33</span>
                                                </span>
                                            </div>
                                        </div>
                                    </li>
                                    <li id="comment-229482"
                                        class="comment">
                                        <div class="comment-actions">
                                            <div class="comment-score">
                                                <span title="количество голосов «полезный комментарий»"
                                                      class="cool">1</span>
                                            </div>
                                        </div>
                                        <div class="comment-text">
                                            <div class="comment-body">
                                                <span class="comment-copy">@eicto: Wolfram Alpha даёт как раз тот результат, который я бы хотел.</span>
                                                <div class="d-inline-flex ai-center">
                                                    –&nbsp;
                                                    <a href="/replace-me"
                                                       title="205,126 баллов репутации"
                                                       class="comment-user owner">VladD</a>
                                                </div>
                                                <span class="comment-date">
                                                    <span title="2013-06-17 16:12:49Z"
                                                          class="relativetime-clean">17 июн 2013 в 16:12</span>
                                                </span>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <a class="comments-link"
                               title="разверните, чтобы увидеть все комментарии к сообщению"
                               href="#"
                               onclick=""
                               role="button">Показать ещё <b>7</b> комментариев</a>
                        </div>
                        <!-- End Question Comments -->
                    </div>
                </div>
                <!-- End Question -->

                <!-- Answers -->
                <div id="answers">
                    <!-- Answers Header -->
                    <div id="answers-header">
                        <div class="answers-subheader d-flex ai-center mb8">
                            <div class="flex--item fl1">
                                <h2 class="mb0">
                                    2 ответа
                                </h2>
                            </div>
                            <div class="flex--item">
                                <div class="d-flex g4 gsx ai-center sm:fd-column sm:ai-start">
                                    <div class="d-flex fd-column ai-end sm:ai-start">
                                        <label class="flex--item fs-caption"
                                               for="answer-sort-dropdown-select-menu">
                                            Сортировка:
                                        </label>
                                    </div>
                                    <div class="flex--item s-select">
                                        <select id="answer-sort-dropdown-select-menu">
                                            <option value="scoredesc"
                                                    selected="selected">
                                                Наивысший рейтинг (по умолчанию)
                                            </option>
                                            <option value="modifieddesc">
                                                Дата изменения (сначала новые)
                                            </option>
                                            <option value="createdasc">
                                                Дата создания (сначала старые)
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Answers Header -->

                    <!-- Answer -->
                    <div id="answer-518646"
                         class="answer accepted-answer">
                        <div class="post-layout">
                            <div class="votecell post-layout--left">
                                <div class="d-flex jc-center fd-column ai-stretch gs4 fc-black-200">
                                    <button class="flex--item s-btn s-btn__unset c-pointer">
                                        <svg class="svg-icon iconArrowUpLg"
                                             width="36"
                                             height="36"
                                             viewBox="0 0 36 36">
                                            <path d="M2 25h32L18 9 2 25Z"></path>
                                        </svg>
                                    </button>
                                    <div class="flex--item d-flex fd-column ai-center fc-black-500 fs-title">7</div>
                                    <button class="flex--item s-btn s-btn__unset c-pointer">
                                        <svg class="svg-icon iconArrowDownLg"
                                             width="36"
                                             height="36"
                                             viewBox="0 0 36 36">
                                            <path d="M2 11h32L18 27 2 11Z"></path>
                                        </svg>
                                    </button>
                                    <button class="s-btn s-btn__unset c-pointer py4">
                                        <svg class="fc-theme-primary-500 d-none svg-icon iconBookmark"
                                             width="18"
                                             height="18"
                                             viewBox="0 0 18 18">
                                            <path d="M3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                        </svg>
                                        <svg class="svg-icon iconBookmarkAlt"
                                             width="18"
                                             height="18"
                                             viewBox="0 0 18 18">
                                            <path d="m9 10.6 4 2.66V3H5v10.26l4-2.66ZM3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                        </svg>
                                    </button>
                                    <div class="flex--item fc-green-700 py6 mtn8">
                                        <div class="ta-center">
                                            <svg
                                                    class="svg-icon iconCheckmarkLg"
                                                    width="36"
                                                    height="36"
                                                    viewBox="0 0 36 36">
                                                <path d="m6 14 8 8L30 6v8L14 30l-8-8v-8Z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <a class="flex--item s-btn s-btn__unset c-pointer py6 mx-auto"
                                       href="/replace-me">
                                        <svg class="mln2 mr0 svg-icon iconHistory"
                                             width="19"
                                             height="18"
                                             viewBox="0 0 19 18">
                                            <path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <div class="answercell post-layout--right">
                                <div class="s-prose">
                                    <p>Для этого сначала нужно получить имя юзера из spring-security</p>
                                    <pre class="lang-java s-code-block"><code class="hljs language-java"><span
                                            class="hljs-keyword">public</span> String <span
                                            class="hljs-title function_">getCurrentUsername</span><span
                                            class="hljs-params">()</span> {
      <span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();
      <span class="hljs-keyword">return</span> auth.getName();
  }
</code></pre>

                                    <p>и передать его в hibernate</p>

                                    <pre class="lang-java s-code-block"><code class="hljs language-java"><span
                                            class="hljs-keyword">public</span> User <span
                                            class="hljs-title function_">getUserByUsername</span><span
                                            class="hljs-params">(String username)</span> {
    CriteriaQuery&lt;User&gt; criteriaQuery = em.getCriteriaBuilder().createQuery(User.class);
    Root&lt;User&gt; userRequest = criteriaQuery.from(User.class);

    Expression&lt;String&gt; exp = userRequest.get(<span class="hljs-string">"username"</span>);
    <span class="hljs-type">Predicate</span> <span class="hljs-variable">predicate</span> <span
                                                class="hljs-operator">=</span> exp.in(username);

    criteriaQuery.where(predicate);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> em.createQuery(criteriaQuery).getSingleResult();
    } <span class="hljs-keyword">catch</span> (NoResultException e) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    }
}
</code></pre>
                                </div>
                                <div class="mt24">
                                    <div class="d-flex fw-wrap ai-start jc-end gs8 gsy">
                                        <time datetime="2016-04-29T13:20:37"></time>
                                        <div class="flex--item mr16"
                                             style="flex: 1 1 100px;">
                                            <div class="pt2">
                                                <div class="d-flex gs8 s-anchors s-anchors__muted fw-wrap">
                                                    <div class="flex--item">
                                                        <a href="/replace-me">Поделиться</a>
                                                    </div>
                                                    <div class="flex--item">
                                                        <a href="/replace-me">
                                                            Улучшить ответ
                                                        </a>
                                                    </div>
                                                    <div class="flex--item">
                                                        <button type="button"
                                                                class="s-btn s-btn__link">
                                                            Отслеживать
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="post-signature flex--item fl0">
                                            <div class="user-info ">
                                                <div class="user-action-time">
                                                    <a href="/replace-me"
                                                       title="показать все правки данного сообщения">
                                                        изменён
                                                        <span title="2016-04-29 13:34:42Z"
                                                              class="relativetime">29 апр 2016 в 13:34</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="post-signature flex--item fl0">
                                            <div class="user-info ">
                                                <div class="user-action-time">
                                                    ответ дан
                                                    <span title="2016-04-29 13:20:37Z"
                                                          class="relativetime">29 апр 2016 в 13:20</span>
                                                </div>
                                                <div class="user-gravatar32">
                                                    <a href="/replace-me">
                                                        <div class="gravatar-wrapper-32"><img
                                                                src="https://i.stack.imgur.com/S2EKO.jpg?s=64&amp;g=1"
                                                                alt="cadmy's user avatar"
                                                                width="32"
                                                                height="32"
                                                                class="bar-sm"></div>
                                                    </a>
                                                </div>
                                                <div class="user-details">
                                                    <a href="/replace-me">cadmy</a>
                                                    <div class="-flair">
                                                        <span class="reputation-score"
                                                              title="уровень репутации "
                                                              dir="ltr">1,880</span>
                                                        <span title="5 золотых знаков">
                                                            <span class="badge1"></span>
                                                            <span class="badgecount">5</span>
                                                        </span>
                                                        <span class="v-visible-sr">5 золотых знаков</span>
                                                        <span title="24&nbsp;серебряных знака">
                                                            <span class="badge2"></span>
                                                            <span class="badgecount">24</span>
                                                        </span>
                                                        <span class="v-visible-sr">24&nbsp;серебряных знака</span>
                                                        <span title="47 бронзовых знаков">
                                                            <span class="badge3"></span>
                                                            <span class="badgecount">47</span>
                                                        </span>
                                                        <span class="v-visible-sr">47 бронзовых знаков</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="post-layout--right">
                                <div id="comments-518646"
                                     class="comments bt bc-black-075 mt12">
                                    <ul class="comments-list">
                                        <li id="comment-636671"
                                            class="comment">
                                            <div class="comment-actions">
                                                <div class="comment-score">
                                                </div>
                                            </div>
                                            <div class="comment-text">
                                                <div class="comment-body">
                                                    <span class="comment-copy">
                                                        Да, важная особенность, как отметил @Nofate, спринговый user и объект из бд - это разные сущности
                                                    </span>
                                                    <div class="d-inline-flex ai-center">
                                                        –&nbsp;
                                                        <a href="/replace-me"
                                                           title="1,880 баллов репутации"
                                                           class="comment-user">cadmy</a>
                                                    </div>
                                                    <span class="comment-date">
                                                            <a class="comment-link"
                                                               href="#comment636671_518646">
                                                                <span title="2016-04-29 13:57:32Z, Лицензия: CC BY-SA 3.0"
                                                                      class="relativetime-clean">29 апр 2016 в 13:57</span>
                                                            </a>
                                                        </span>
                                                    <span title="комментарий был изменён 1 раз">
                                                            <svg class="va-text-bottom o50 svg-icon iconPencilSm"
                                                                 width="14"
                                                                 height="14"
                                                                 viewBox="0 0 14 14"><path
                                                                    d="m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z"></path></svg>
                                                    </span>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="comments-link-518646">
                                    <a class="comments-link disabled-link"
                                       title="Используйте комментарии для запроса дополнительной информации или предложения улучшений. Избегайте комментариев в стиле «+1» или «Спасибо»."
                                       href="/replace-me"
                                       role="button">Добавить комментарий</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Answer -->

                    <!-- Answer -->
                    <div id="answer-518654"
                         class="answer">
                        <div class="post-layout">
                            <div class="votecell post-layout--left">
                                <div class="d-flex jc-center fd-column ai-stretch gs4 fc-black-200">
                                    <button class="flex--item s-btn s-btn__unset c-pointer">
                                        <svg class="svg-icon iconArrowUpLg"
                                             width="36"
                                             height="36"
                                             viewBox="0 0 36 36">
                                            <path d="M2 25h32L18 9 2 25Z"></path>
                                        </svg>
                                    </button>
                                    <div class="flex--item d-flex fd-column ai-center fc-black-500 fs-title">7</div>
                                    <button class="flex--item s-btn s-btn__unset c-pointer ">
                                        <svg class="svg-icon iconArrowDownLg"
                                             width="36"
                                             height="36"
                                             viewBox="0 0 36 36">
                                            <path d="M2 11h32L18 27 2 11Z"></path>
                                        </svg>
                                    </button>
                                    <button class="s-btn s-btn__unset c-pointer py4">
                                        <svg class="fc-theme-primary-500 d-none svg-icon iconBookmark"
                                             width="18"
                                             height="18"
                                             viewBox="0 0 18 18">
                                            <path d="M3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                        </svg>
                                        <svg class="svg-icon iconBookmarkAlt"
                                             width="18"
                                             height="18"
                                             viewBox="0 0 18 18">
                                            <path d="m9 10.6 4 2.66V3H5v10.26l4-2.66ZM3 17V3c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v14l-6-4-6 4Z"></path>
                                        </svg>
                                    </button>
                                    <div class="flex--item fc-green-700 py6 mtn8 d-none">
                                        <div class="ta-center">
                                            <svg class="svg-icon iconCheckmarkLg"
                                                 width="36"
                                                 height="36"
                                                 viewBox="0 0 36 36">
                                                <path d="m6 14 8 8L30 6v8L14 30l-8-8v-8Z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <a class="flex--item s-btn s-btn__unset c-pointer py6 mx-auto"
                                       href="/replace-me">
                                        <svg class="mln2 mr0 svg-icon iconHistory"
                                             width="19"
                                             height="18"
                                             viewBox="0 0 19 18">
                                            <path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <div class="answercell post-layout--right">
                                <div class="s-prose">
                                    <p>Начиная с Spring-Security 3.2 удобнее воспользоваться аннотацией <a
                                            href="http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/apidocs/org/springframework/security/web/bind/annotation/AuthenticationPrincipal.html">@AuthenticationPrincipal</a>
                                        на аргументе метода вашего контроллера.</p>
                                    <pre class="lang-java s-code-block"><code class="hljs language-java">ModelAndView <span
                                            class="hljs-title function_">someRequestHandler</span><span
                                            class="hljs-params">(<span
                                            class="hljs-meta">@AuthenticationPrincipal</span> User user)</span> {
    <span class="hljs-comment">// ...</span>
}
</code></pre>

                                    <p><code>User</code> - это именно спринговый юзер, а не тот объект, который вы
                                        кладете в БД.</p>

                                    <p>Чтобы это работало, нужно зарегистрировать бин <code>AuthenticationPrincipalArgumentResolver</code>:
                                    </p>

                                    <ul>
                                        <li><p>при использовании Java-конфигурации - повесть аннотацию <code>@EnableWebMvcSecurity</code>
                                            на ваш <code>@Configuration</code>-бин;</p></li>
                                        <li><p>при использовании xml-конфигурации - зарегистрировать его в <code>&lt;mvc:argument-resolvers&gt;</code>:
                                        </p>

                                            <pre class="lang-xml s-code-block"><code class="hljs language-xml"><span
                                                    class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">mvc:argument-resolvers</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span
                  class="hljs-string">"AuthenticationPrincipalArgumentResolver"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:argument-resolvers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mvc:annotation-driven</span>&gt;</span>
</code></pre>
                                        </li>
                                    </ul>
                                </div>
                                <div class="mt24">
                                    <div class="d-flex fw-wrap ai-start jc-end gs8 gsy">
                                        <time datetime="2016-04-29T13:38:02"></time>
                                        <div class="flex--item mr16"
                                             style="flex: 1 1 100px;">
                                            <div class="pt2">
                                                <div class="d-flex gs8 s-anchors s-anchors__muted fw-wrap">
                                                    <div class="flex--item">
                                                        <a href="/replace-me">Поделиться</a>
                                                    </div>
                                                    <div class="flex--item">
                                                        <a href="/replace-me">Улучшить ответ</a>
                                                    </div>
                                                    <div class="flex--item">
                                                        <button type="button"
                                                                class="s-btn s-btn__link">
                                                            Отслеживать
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="post-signature flex--item fl0">
                                            <div class="user-info ">
                                                <div class="user-action-time">
                                                    <a href="/replace-me"
                                                       title="показать все правки данного сообщения">изменён
                                                        <span title="2016-04-29 13:46:04Z"
                                                              class="relativetime">29 апр 2016 в 13:46</span></a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="post-signature flex--item fl0">
                                            <div class="user-info user-hover">
                                                <div class="user-action-time">
                                                    ответ дан <span title="2016-04-29 13:38:02Z"
                                                                    class="relativetime">29 апр 2016 в 13:38</span>
                                                </div>
                                                <div class="user-gravatar32">
                                                    <a href="/replace-me">
                                                        <div class="gravatar-wrapper-32"><img
                                                                src="https://i.stack.imgur.com/1NZEU.png?s=64&amp;g=1"
                                                                alt="Nofate's user avatar"
                                                                width="32"
                                                                height="32"
                                                                class="bar-sm"></div>
                                                    </a>
                                                </div>
                                                <div class="user-details">
                                                    <a href="/replace-me">Nofate</a><span
                                                        class="mod-flair mtn2"
                                                        title="Модератор">♦</span><span
                                                        class="d-none">Nofate</span>
                                                    <div class="-flair">
                                                        <span class="reputation-score"
                                                              title="уровень репутации 34,211">34.2k</span>
                                                        <span title="15 золотых знаков">
                                                            <span class="badge1"></span>
                                                            <span class="badgecount">15</span>
                                                        </span>
                                                        <span class="v-visible-sr">15 золотых знаков</span>
                                                        <span title="63&nbsp;серебряных знака">
                                                            <span class="badge2"></span>
                                                            <span class="badgecount">63</span>
                                                        </span>
                                                        <span class="v-visible-sr">63&nbsp;серебряных знака</span>
                                                        <span title="91 бронзовый знак">
                                                            <span class="badge3"></span>
                                                            <span class="badgecount">91</span>
                                                        </span>
                                                        <span class="v-visible-sr">91 бронзовый знак</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="post-layout--right">
                                <div id="comments-518654"
                                     class="comments bt bc-black-075 mt12 dno">
                                    <ul class="comments-list">
                                    </ul>
                                </div>
                                <div id="comments-link-518654">
                                    <a class="comments-link disabled-link"
                                       title="Используйте комментарии для запроса дополнительной информации или предложения улучшений. Избегайте комментариев в стиле «+1» или «Спасибо»."
                                       href="/replace-me"
                                       role="button">Добавить комментарий</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Answer -->

                    <!-- Answer Form -->
                    <form id="post-form"
                          action="/replace-me"
                          method="post"
                          class="post-form">
                        <h2 class="space"
                            id="your-answer-header">
                            Ваш ответ
                        </h2>
                        <div id="post-editor"
                             class="post-editor">
                                <textarea id="wmd-input"
                                          name="post-text"
                                          class="wmd-input s-input bar0"
                                          cols="92"
                                          rows="15"></textarea>
                        </div>
                        <div class="ps-relative">
                            <div class="form-item new-post-login p0 my16">
                                <div class="d-flex gs16 md:fd-column new-login-form">
                                    <div class="d-flex fd-column w50 md:w-auto gsy gs8 jc-space-between new-login-left">
                                        <h3 class="flex--item fs-title">
                                            <a href="/replace-me">Зарегистрируйтесь</a>
                                            или
                                            <a href="/replace-me">войдите</a>
                                            чтобы ответить на этот вопрос
                                        </h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-submit clear-both d-flex gsx gs4">
                            <button id="submit-button"
                                    class="flex--item s-btn s-btn__primary s-btn__icon"
                                    type="submit"
                                    tabindex="120"
                                    autocomplete="off">
                                Отправить ответ
                            </button>
                        </div>
                        <div class="general-error clear-both d-none"></div>
                    </form>
                    <!-- End Answer Form -->

                    <!-- Answers Footer -->
                    <div class="bottom-notice">
                        Всё ещё ищете ответ? Посмотрите другие вопросы с метками
                        <ul class="ml0 list-ls-none d-inline">
                            <li class="d-inline mr4">
                                <a href="/replace-me"
                                   class="post-tag"
                                   title="показать вопросы с меткой [java]">java</a>
                            </li>
                            <li class="d-inline mr4">
                                <a href="/replace-me"
                                   class="post-tag"
                                   title="показать вопросы с меткой [spring]">spring</a>
                            </li>
                            <li class="d-inline mr4">
                                <a href="/replace-me"
                                   class="post-tag"
                                   title="показать вопросы с меткой [hibernate]">hibernate</a>
                            </li>
                        </ul>
                        или
                        <a href="/replace-me">задайте свой вопрос</a>.
                    </div>
                    <!-- End Answers Footer -->
                </div>
                <!-- End Answers -->
            </div>

            <!-- Sidebar -->
            <div id="sidebar"
                 class="show-votes">
                <div class="module sidebar-related">
                    <h4 id="h-related">Похожие</h4>
                    <div class="related">
                        <div class="spacer">
                            <a href="/replace-me"
                               title="Question score (upvotes - downvotes)">
                                <div class="answer-votes answered-accepted default">1</div>
                            </a>
                            <a href="/replace-me"
                               class="question-hyperlink">
                                Как организовать хранение файлов БД в файловой структуре Веб-приложения</a>
                        </div>
                        <div class="spacer">
                            <a href="/replace-me"
                               title="Question score (upvotes - downvotes)">
                                <div class="answer-votes answered-accepted default">0</div>
                            </a>
                            <a href="/replace-me"
                               class="question-hyperlink">Сохранение пользователя, Spring Security, ROLE</a>
                        </div>
                        <div class="spacer">
                            <a href="/replace-me"
                               title="Question score (upvotes - downvotes)">
                                <div class="answer-votes answered-accepted default">0</div>
                            </a>
                            <a href="/replace-me"
                               class="question-hyperlink">Spring security авторизация пользователя</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Sidebar -->
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
<script type="text/javascript"
        src="/js/sidebar.js"></script>
<script type="text/javascript"
        src="/js/header.js"></script>
<script type="text/javascript"
        src="/js/footer.js"></script>
</body>
</html>

